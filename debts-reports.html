<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title data-ar="غريم - تقارير الديون" data-en="Gharim - Debt Reports">
      غريم - تقارير الديون
    </title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: "#6366f1",
              secondary: "#f8fafc",
              accent: "#10b981",
              danger: "#ef4444",
              warning: "#f59e0b",
            },
            fontFamily: {
              arabic: ["Tajawal", "Cairo", "system-ui", "sans-serif"],
              english: ["Inter", "system-ui", "sans-serif"],
            },
          },
        },
      };
    </script>
    <link
      href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&family=Inter:wght@300;400;500;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="lang.js"></script>
  </head>
  <body class="bg-gray-50 font-arabic min-h-screen">
    <!-- Header -->
    <header
      class="bg-white shadow-sm border-b border-gray-100 sticky top-0 z-50"
    >
      <div class="flex items-center justify-between p-3 sm:p-4">
        <div class="flex items-center gap-2 sm:gap-3 min-w-0 flex-1">
          <!-- Back Button -->
          <button
            onclick="window.history.back()"
            class="w-8 h-8 sm:w-10 sm:h-10 bg-gray-100 rounded-full flex items-center justify-center flex-shrink-0 hover:bg-gray-200 transition-colors"
          >
            <i class="fas fa-arrow-right text-gray-600 text-sm sm:text-lg"></i>
          </button>

          <div
            class="w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-primary to-indigo-600 rounded-xl flex items-center justify-center flex-shrink-0"
          >
            <i class="fas fa-chart-bar text-white text-sm sm:text-lg"></i>
          </div>
          <div class="min-w-0 flex-1">
            <h1
              class="text-lg sm:text-xl font-bold text-gray-900 truncate"
              data-ar="تقارير الديون"
              data-en="Debt Reports"
            >
              تقارير الديون
            </h1>
            <p
              class="text-xs text-gray-500 hidden sm:block"
              data-ar="تحليلات مفصلة للديون والمدفوعات"
              data-en="Detailed analysis of debts and payments"
            >
              تحليلات مفصلة للديون والمدفوعات
            </p>
          </div>
        </div>
        <div class="flex items-center gap-1 sm:gap-2 flex-shrink-0">
          <!-- Notifications -->
          <div class="relative">
            <button
              id="notificationBtn"
              onclick="toggleNotifications()"
              class="w-8 h-8 sm:w-10 sm:h-10 bg-gray-100 rounded-full flex items-center justify-center relative"
            >
              <i class="fas fa-bell text-gray-600 text-sm sm:text-lg"></i>
            </button>
          </div>

          <!-- Profile -->
          <a
            href="profile.html"
            class="w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center hover:bg-gray-200 transition-colors"
          >
            <i class="fas fa-user-circle text-gray-600 text-xl"></i>
          </a>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="p-4 space-y-6 pb-24">
      <!-- Report Filters -->
      <section
        class="bg-white rounded-2xl shadow-sm border border-gray-100 p-4 sm:p-6"
      >
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2"
              >الفترة الزمنية</label
            >
            <select
              id="timePeriodFilter"
              class="w-full border border-gray-300 rounded-xl px-4 py-3 focus:ring-2 focus:ring-primary focus:border-transparent"
            >
              <option value="1month">آخر شهر</option>
              <option value="3months">آخر 3 أشهر</option>
              <option value="6months" selected>آخر 6 أشهر</option>
              <option value="1year">آخر سنة</option>
              <option value="custom">مخصص</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2"
              >نوع التقرير</label
            >
            <select
              id="reportTypeFilter"
              class="w-full border border-gray-300 rounded-xl px-4 py-3 focus:ring-2 focus:ring-primary focus:border-transparent"
            >
              <option value="comprehensive">تقرير شامل</option>
              <option value="overdue">الديون المتأخرة</option>
              <option value="categories">تحليل الفئات</option>
              <option value="payments">تقرير السداد</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2"
              >العملة</label
            >
            <select
              id="currencyFilter"
              class="w-full border border-gray-300 rounded-xl px-4 py-3 focus:ring-2 focus:ring-primary focus:border-transparent"
            >
              <option value="all">جميع العملات</option>
              <option value="SAR">ريال سعودي</option>
              <option value="USD">دولار أمريكي</option>
              <option value="EUR">يورو</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2"
              >التصدير</label
            >
            <div class="flex gap-2">
              <button
                onclick="exportReport('excel')"
                class="flex-1 bg-green-600 text-white py-3 rounded-xl text-sm font-medium hover:bg-green-700 transition-colors flex items-center justify-center gap-1"
              >
                <i class="fas fa-file-excel"></i>
                Excel
              </button>
              <button
                onclick="exportReport('pdf')"
                class="flex-1 bg-red-600 text-white py-3 rounded-xl text-sm font-medium hover:bg-red-700 transition-colors flex items-center justify-center gap-1"
              >
                <i class="fas fa-file-pdf"></i>
                PDF
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- Report Summary -->
      <section class="grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6">
        <div class="bg-red-50 border border-red-200 rounded-xl p-4 sm:p-6">
          <div class="flex items-center gap-3 mb-3">
            <div
              class="w-10 h-10 bg-red-100 rounded-full flex items-center justify-center"
            >
              <i class="fas fa-arrow-up text-red-600"></i>
            </div>
            <h4 class="font-semibold text-red-800">إجمالي الديون عليك</h4>
          </div>
          <p class="text-2xl font-bold text-red-600 mb-2">12,450.00 ر.س</p>
          <div class="flex items-center gap-2">
            <span class="text-sm text-red-600 bg-red-100 px-2 py-1 rounded-full"
              >+5.2%</span
            >
            <span class="text-sm text-red-600">من الشهر الماضي</span>
          </div>
        </div>
        <div class="bg-green-50 border border-green-200 rounded-xl p-4 sm:p-6">
          <div class="flex items-center gap-3 mb-3">
            <div
              class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center"
            >
              <i class="fas fa-arrow-down text-green-600"></i>
            </div>
            <h4 class="font-semibold text-green-800">إجمالي الديون لك</h4>
          </div>
          <p class="text-2xl font-bold text-green-600 mb-2">8,320.00 ر.س</p>
          <div class="flex items-center gap-2">
            <span
              class="text-sm text-green-600 bg-green-100 px-2 py-1 rounded-full"
              >-2.1%</span
            >
            <span class="text-sm text-green-600">من الشهر الماضي</span>
          </div>
        </div>
        <div class="bg-blue-50 border border-blue-200 rounded-xl p-4 sm:p-6">
          <div class="flex items-center gap-3 mb-3">
            <div
              class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center"
            >
              <i class="fas fa-percentage text-blue-600"></i>
            </div>
            <h4 class="font-semibold text-blue-800">معدل السداد</h4>
          </div>
          <p class="text-2xl font-bold text-blue-600 mb-2">78%</p>
          <div class="flex items-center gap-2">
            <span
              class="text-sm text-blue-600 bg-blue-100 px-2 py-1 rounded-full"
              >+12%</span
            >
            <span class="text-sm text-blue-600">من الشهر الماضي</span>
          </div>
        </div>
      </section>

      <!-- Detailed Analytics -->
      <section class="grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6">
        <!-- Payment Trends -->
        <div
          class="bg-white rounded-2xl shadow-sm border border-gray-100 p-4 sm:p-6"
        >
          <div class="flex items-center justify-between mb-4">
            <h4 class="font-semibold text-gray-900 text-lg">اتجاهات السداد</h4>
            <button class="text-primary text-sm font-medium">
              تفاصيل أكثر
            </button>
          </div>
          <div class="h-48 sm:h-64">
            <canvas id="paymentTrendsChart"></canvas>
          </div>
        </div>

        <!-- Top Debtors/Creditors -->
        <div
          class="bg-white rounded-2xl shadow-sm border border-gray-100 p-4 sm:p-6"
        >
          <div class="flex items-center justify-between mb-4">
            <h4 class="font-semibold text-gray-900 text-lg">أكبر المدينين</h4>
            <button class="text-primary text-sm font-medium">عرض الكل</button>
          </div>
          <div class="space-y-4">
            <div
              class="flex items-center justify-between p-3 bg-gray-50 rounded-lg"
            >
              <div class="flex items-center gap-3">
                <div
                  class="w-10 h-10 bg-red-500 rounded-full flex items-center justify-center"
                >
                  <span class="text-white text-sm font-bold">أ</span>
                </div>
                <div>
                  <span class="font-medium text-gray-900">أحمد محمد</span>
                  <p class="text-xs text-gray-500">3 ديون نشطة</p>
                </div>
              </div>
              <span class="font-bold text-red-600">2,150.00 ر.س</span>
            </div>
            <div
              class="flex items-center justify-between p-3 bg-gray-50 rounded-lg"
            >
              <div class="flex items-center gap-3">
                <div
                  class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center"
                >
                  <span class="text-white text-sm font-bold">م</span>
                </div>
                <div>
                  <span class="font-medium text-gray-900">محمد علي</span>
                  <p class="text-xs text-gray-500">2 ديون نشطة</p>
                </div>
              </div>
              <span class="font-bold text-red-600">1,800.00 ر.س</span>
            </div>
            <div
              class="flex items-center justify-between p-3 bg-gray-50 rounded-lg"
            >
              <div class="flex items-center gap-3">
                <div
                  class="w-10 h-10 bg-green-500 rounded-full flex items-center justify-center"
                >
                  <span class="text-white text-sm font-bold">س</span>
                </div>
                <div>
                  <span class="font-medium text-gray-900">سارة أحمد</span>
                  <p class="text-xs text-gray-500">1 دين نشط</p>
                </div>
              </div>
              <span class="font-bold text-red-600">1,450.00 ر.س</span>
            </div>
          </div>
        </div>
      </section>

      <!-- Categories Analysis -->
      <section
        class="bg-white rounded-2xl shadow-sm border border-gray-100 p-4 sm:p-6"
      >
        <div class="flex items-center justify-between mb-6">
          <h3 class="text-lg font-semibold text-gray-900">تحليل الفئات</h3>
          <select class="bg-gray-50 border-none rounded-lg py-2 px-3 text-sm">
            <option>جميع الفئات</option>
            <option>شخصي</option>
            <option>تجاري</option>
            <option>عائلي</option>
            <option>مجموعة</option>
          </select>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <!-- Categories Chart -->
          <div>
            <div class="h-64">
              <canvas id="categoriesChart"></canvas>
            </div>
          </div>

          <!-- Categories Details -->
          <div class="space-y-4">
            <div
              class="flex items-center justify-between p-4 bg-red-50 rounded-lg"
            >
              <div class="flex items-center gap-3">
                <div class="w-4 h-4 bg-red-500 rounded-full"></div>
                <div>
                  <span class="font-medium text-gray-900">شخصي</span>
                  <p class="text-xs text-gray-500">42% من إجمالي الديون</p>
                </div>
              </div>
              <span class="font-bold text-red-600">5,250.00 ر.س</span>
            </div>
            <div
              class="flex items-center justify-between p-4 bg-blue-50 rounded-lg"
            >
              <div class="flex items-center gap-3">
                <div class="w-4 h-4 bg-blue-500 rounded-full"></div>
                <div>
                  <span class="font-medium text-gray-900">تجاري</span>
                  <p class="text-xs text-gray-500">27% من إجمالي الديون</p>
                </div>
              </div>
              <span class="font-bold text-blue-600">3,400.00 ر.س</span>
            </div>
            <div
              class="flex items-center justify-between p-4 bg-green-50 rounded-lg"
            >
              <div class="flex items-center gap-3">
                <div class="w-4 h-4 bg-green-500 rounded-full"></div>
                <div>
                  <span class="font-medium text-gray-900">عائلي</span>
                  <p class="text-xs text-gray-500">23% من إجمالي الديون</p>
                </div>
              </div>
              <span class="font-bold text-green-600">2,800.00 ر.س</span>
            </div>
            <div
              class="flex items-center justify-between p-4 bg-purple-50 rounded-lg"
            >
              <div class="flex items-center gap-3">
                <div class="w-4 h-4 bg-purple-500 rounded-full"></div>
                <div>
                  <span class="font-medium text-gray-900">مجموعة</span>
                  <p class="text-xs text-gray-500">8% من إجمالي الديون</p>
                </div>
              </div>
              <span class="font-bold text-purple-600">1,000.00 ر.س</span>
            </div>
          </div>
        </div>
      </section>

      <!-- Payment History Timeline -->
      <section
        class="bg-white rounded-2xl shadow-sm border border-gray-100 p-4 sm:p-6"
      >
        <div class="flex items-center justify-between mb-6">
          <h3 class="text-lg font-semibold text-gray-900">سجل المدفوعات</h3>
          <div class="flex gap-2">
            <button class="bg-primary text-white px-4 py-2 rounded-lg text-sm">
              <i class="fas fa-download mr-1"></i>
              تصدير السجل
            </button>
          </div>
        </div>

        <div class="space-y-4">
          <div
            class="flex items-center gap-4 p-4 border border-gray-200 rounded-lg"
          >
            <div
              class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center"
            >
              <i class="fas fa-check text-green-600"></i>
            </div>
            <div class="flex-1">
              <div class="flex items-center justify-between">
                <h4 class="font-medium text-gray-900">
                  دفعة مستلمة من سارة أحمد
                </h4>
                <span class="text-green-600 font-bold">+500.00 ر.س</span>
              </div>
              <p class="text-sm text-gray-500">15 نوفمبر 2024 - 2:30 ص</p>
            </div>
          </div>

          <div
            class="flex items-center gap-4 p-4 border border-gray-200 rounded-lg"
          >
            <div
              class="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center"
            >
              <i class="fas fa-arrow-up text-red-600"></i>
            </div>
            <div class="flex-1">
              <div class="flex items-center justify-between">
                <h4 class="font-medium text-gray-900">دفعة لأحمد محمد</h4>
                <span class="text-red-600 font-bold">-200.00 ر.س</span>
              </div>
              <p class="text-sm text-gray-500">12 نوفمبر 2024 - 6:15 م</p>
            </div>
          </div>

          <div
            class="flex items-center gap-4 p-4 border border-gray-200 rounded-lg"
          >
            <div
              class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center"
            >
              <i class="fas fa-plus text-blue-600"></i>
            </div>
            <div class="flex-1">
              <div class="flex items-center justify-between">
                <h4 class="font-medium text-gray-900">دين جديد مضاف</h4>
                <span class="text-blue-600 font-bold">+750.00 ر.س</span>
              </div>
              <p class="text-sm text-gray-500">10 نوفمبر 2024 - 11:20 ص</p>
            </div>
          </div>
        </div>

        <div class="text-center mt-6">
          <button class="text-primary font-medium">
            عرض المزيد من السجلات
          </button>
        </div>
      </section>
    </main>

    <script>
      // Chart initialization
      document.addEventListener("DOMContentLoaded", function () {
        // Payment Trends Chart
        if (document.getElementById("paymentTrendsChart")) {
          const ctx = document
            .getElementById("paymentTrendsChart")
            .getContext("2d");
          new Chart(ctx, {
            type: "bar",
            data: {
              labels: ["يناير", "فبراير", "مارس", "أبريل", "مايو", "يونيو"],
              datasets: [
                {
                  label: "المدفوعات المستلمة",
                  data: [3200, 4100, 2800, 3900, 3500, 4200],
                  backgroundColor: "#10b981",
                  borderRadius: 8,
                },
                {
                  label: "المدفوعات المرسلة",
                  data: [2100, 2800, 1900, 2400, 2200, 2900],
                  backgroundColor: "#ef4444",
                  borderRadius: 8,
                },
              ],
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              plugins: {
                legend: {
                  position: "top",
                },
              },
              scales: {
                y: {
                  beginAtZero: true,
                },
              },
            },
          });
        }

        // Categories Chart
        if (document.getElementById("categoriesChart")) {
          const ctx2 = document
            .getElementById("categoriesChart")
            .getContext("2d");
          new Chart(ctx2, {
            type: "doughnut",
            data: {
              labels: ["شخصي", "تجاري", "عائلي", "مجموعة"],
              datasets: [
                {
                  data: [5250, 3400, 2800, 1000],
                  backgroundColor: ["#ef4444", "#3b82f6", "#10b981", "#8b5cf6"],
                  borderWidth: 0,
                },
              ],
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              plugins: {
                legend: {
                  position: "bottom",
                  labels: {
                    padding: 20,
                    usePointStyle: true,
                  },
                },
              },
            },
          });
        }
      });

      // Export functionality
      function exportReport(format) {
        console.log(`Exporting report in ${format} format`);
        // Add export logic here
      }

      // Filter functionality
      document
        .getElementById("timePeriodFilter")
        .addEventListener("change", function () {
          console.log("Time period changed:", this.value);
          // Add filter logic here
        });

      document
        .getElementById("reportTypeFilter")
        .addEventListener("change", function () {
          console.log("Report type changed:", this.value);
          // Add filter logic here
        });

      document
        .getElementById("currencyFilter")
        .addEventListener("change", function () {
          console.log("Currency changed:", this.value);
          // Add filter logic here
        });

      // Notifications functionality
      function toggleNotifications() {
        console.log("Toggle notifications");
      }
    </script>

    <!-- Bottom Navigation -->
    <nav
      class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-1 sm:px-2 py-1.5 sm:py-2"
    >
      <div class="flex items-center justify-around">
        <a
          href="index.html"
          class="nav-item flex flex-col items-center gap-0.5 sm:gap-1 p-1.5 sm:p-2 text-gray-400 transition-all duration-200 relative min-w-0 flex-1"
        >
          <i class="fas fa-home text-base sm:text-lg"></i>
          <span class="nav-text text-xs text-center">الرئيسية</span>
        </a>
        <a
          href="expenses.html"
          class="nav-item flex flex-col items-center gap-0.5 sm:gap-1 p-1.5 sm:p-2 text-gray-400 transition-all duration-200 relative min-w-0 flex-1"
        >
          <i class="fas fa-receipt text-base sm:text-lg"></i>
          <span class="nav-text text-xs text-center">المصاريف</span>
        </a>
        <a
          href="debts.html"
          class="nav-item flex flex-col items-center gap-0.5 sm:gap-1 p-1.5 sm:p-2 text-primary transition-all duration-200 relative active min-w-0 flex-1"
        >
          <i class="fas fa-hand-holding-usd text-base sm:text-lg"></i>
          <span class="nav-text text-xs font-medium text-center">الديون</span>
        </a>
        <a
          href="split-group-bills.html"
          class="nav-item flex flex-col items-center gap-0.5 sm:gap-1 p-1.5 sm:p-2 text-gray-400 transition-all duration-200 relative min-w-0 flex-1"
        >
          <i class="fas fa-users text-base sm:text-lg"></i>
          <span class="nav-text text-xs text-center">المجموعات</span>
        </a>
        <button
          onclick="toggleMoreNav()"
          class="nav-item flex flex-col items-center gap-1 p-2 text-gray-400 relative transition-all duration-200 min-w-0 flex-1"
        >
          <i class="fas fa-ellipsis-h text-lg"></i>
          <span class="nav-text text-xs text-center">المزيد</span>
        </button>
      </div>
    </nav>

    <script>
      function toggleMoreNav() {
        console.log("Toggle more nav");
      }
    </script>
  </body>
</html>
